<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Color Palette Generator</title>
		<style>
		  html, body {
			  margin: 0;
		  }
		  .container {
			  background-color: black;
			  width: 100%;
			  height: 100vh;
			  display: flex;
		  }
		  .color {
			  height: 100%;
			  display: flex;
			  justify-content: center;
			  align-items: flex-end;
			  cursor: pointer;
			  transition: 0.2s opacity;
		  }
		  .color:active {
			  opacity: 0.8;
		  }
		  .color span {
			  font-size: 1.5rem;
			  margin-bottom: 2rem;
			  color: white;
			  text-shadow: 1px 1px black;
		  }
		</style>
	</head>
	<body>
		<div class="container"></div>

		<form id="form">
			<input type="text" name="query">
			<button>Submit</button>
		</form>

		<script>
			const form = document.querySelector("#form");
			form.addEventListener("submit", function(e) {
				e.preventDefault();
				const query = form.elements.query.value;
				fetch("/palette", {
					method: "POST",
					headers: {
						"Content-Type": "application/x-www-form-urlencoded"
					},
					body: new URLSearchParams({
						query: query
					})
				})
				.then((response) => response.json())
				.then(data => {
					const colors = data.colors;
					const container = document.querySelector(".container");
					container.innerHTML = "";
					for (const color of colors) {
						const div = document.createElement("div");
						div.classList.add("color");
						div.style.backgroundColor = color;
						div.style.width = `calc(100%/ ${colors.length})`

						div.addEventListener("click", function() {
							navigator.clipboard.writeText(color);
						})

						const span = document.createElement("span");
						span.innerHTML = color;
						div.appendChild(span);
						container.appendChild(div);
					}
				})
			})
		</script>
	</body>
</html>
